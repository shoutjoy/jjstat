% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/mlsem_fit_indices.R
\name{mlsem_fit_indices}
\alias{mlsem_fit_indices}
\title{Extract Model Fit Indices for Multilevel SEM}
\usage{
mlsem_fit_indices(
  fit,
  type = c("data", "long", "wide", "apa"),
  robust = TRUE,
  digits = 3
)
}
\arguments{
\item{fit}{A fitted lavaan object (e.g., from \code{sem()} with
\code{cluster} specified).}

\item{type}{Output type.
One of \code{"data"}, \code{"long"}, \code{"wide"}, or \code{"apa"}.
\itemize{
  \item \code{"data"}: APA-style long format (Indexâ€“Value).
  \item \code{"long"}: Same as \code{"data"}.
  \item \code{"wide"}: One-row wide data.frame.
  \item \code{"apa"}: Same as \code{"wide"} (alias for reporting).
}}

\item{robust}{Logical. If TRUE (default), robust fit indices
(e.g., robust CFI, TLI, RMSEA) are used when available.}

\item{digits}{Integer. Number of decimal places for rounding.}
}
\value{
A data.frame containing model fit indices.
The structure depends on \code{type}.
}
\description{
This function extracts model fit indices from a fitted
multilevel SEM object (lavaan), with robust fit measures prioritized
when available. The output can be returned in long (APA-style) or
wide format depending on the selected type.
}
\details{
This function is designed to be used upstream of
\code{mlsem_modelfit_paper()}.
It performs no table formatting and returns numeric values only.
}
\examples{
\dontrun{
############################################
# Example 1. Typical usage after ML-SEM
############################################

fit_tab_long <- mlsem_fit_indices(fit_mlsem, type = "long")
fit_tab_data <- mlsem_fit_indices(fit_mlsem, type = "data")
fit_tab_wide <- mlsem_fit_indices(fit_mlsem, type = "wide")
fit_tab_apa  <- mlsem_fit_indices(fit_mlsem, type = "apa")

# Pipe-friendly usage
mlsem_fit_indices(fit_mlsem) \%>\%
  mlsem_modelfit_paper(type = "kable", format = "markdown")


############################################
# Example 2. Simple Multilevel SEM example
############################################

library(lavaan)

# Simulated multilevel data
set.seed(123)
dat <- data.frame(
  university = rep(1:25, each = 40),
  x1 = rnorm(1000),
  x2 = rnorm(1000),
  y1 = rnorm(1000),
  y2 = rnorm(1000)
)

# Multilevel SEM model
model_ml <- '
  level: 1
    X =~ x1 + x2
    Y =~ y1 + y2
    Y ~ X

  level: 2
    Y ~ X
'

fit_mlsem <- sem(
  model_ml,
  data      = dat,
  cluster   = "university",
  estimator = "MLR"
)

# Extract fit indices (APA long format)
fit_tab <- mlsem_fit_indices(fit_mlsem, type = "long")

# Convert to paper-ready table
mlsem_modelfit_paper(fit_tab, type = "kable", format = "markdown")
}
}
