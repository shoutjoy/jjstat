% Generated by roxygen2: do not edit by hand
% Please edit documentation in R/item_parceling.R
\name{item_parceling}
\alias{item_parceling}
\title{Item Parceling Utility Function}
\usage{
item_parceling(
  data,
  ...,
  fun = "mean",
  type = c("new", "data", "all"),
  weights = NULL,
  standardize_items = FALSE,
  min_valid = 1,
  factor_score = c("regression", "bartlett"),
  lavaan_estimator = "ML",
  std.lv = FALSE,
  name_in_vector = FALSE,
  verbose = FALSE
)
}
\arguments{
\item{data}{A data.frame containing observed item variables.}

\item{...}{Parcel definitions.}

\item{fun}{Scoring method. Options include "mean", "sum", "median", "wmean",
"factor_efa", "fs_efa", "factor_cfa", "fs_cfa".
Abbreviated forms "efa" and "cfa" are allowed with a warning.}

\item{type}{Output type:
"new" (parcel data only),
"data" (append parcels to original data),
"all" (data + metadata).}

\item{weights}{Numeric vector or a named list of numeric vectors.
For fun = "wmean", parcel-specific weights can be supplied as a list.
Parcels without weights will be aggregated using mean().}

\item{standardize_items}{Logical. If TRUE, items are standardized before scoring.}

\item{min_valid}{Minimum number of valid items required per row.}

\item{factor_score}{Factor score method for EFA ("regression", "bartlett").}

\item{lavaan_estimator}{Estimator for CFA.}

\item{std.lv}{Logical. If TRUE, latent variance is fixed to 1 in CFA.}

\item{name_in_vector}{Logical or "auto".
- TRUE: c("ParcelName","item1","item2",...)
- FALSE: ParcelName = c("item1","item2",...) (default)
- "auto": if the first element is not a column name, treat it as parcel name.}

\item{verbose}{Logical. If TRUE, prints reliability summaries.}
}
\value{
Depending on type, a data.frame or a list.
}
\description{
This function creates item parcels from observed item-level data using
aggregation methods (mean, sum, weighted mean) or
factor-score-based methods (EFA / CFA).
}
\examples{
## -------------------------------------------------
## Example data
## -------------------------------------------------
set.seed(123)
shindata_example <- data.frame(
  efficacy2 = rnorm(100, 3.5, 0.8),
  efficacy3 = rnorm(100, 3.6, 0.7),
  efficacy4 = rnorm(100, 3.7, 0.6),

  Accessibility1 = rnorm(100, 4.0, 0.9),
  Accessibility2 = rnorm(100, 3.9, 0.8),
  Accessibility3 = rnorm(100, 4.1, 0.7),
  Accessibility4 = rnorm(100, 4.0, 0.6),
  Accessibility5 = rnorm(100, 3.8, 0.9),

  Interest1 = rnorm(100, 3.2, 0.7),
  Interest2 = rnorm(100, 3.3, 0.8),
  Interest3 = rnorm(100, 3.4, 0.6),
  Interest4 = rnorm(100, 3.5, 0.7)
)

## -------------------------------------------------
## Basic example: sum
## -------------------------------------------------
parcel_sum <- item_parceling(
  data = shindata_example,
  효능감 = c("efficacy2","efficacy3","efficacy4"),
  연구접근성 = c("Accessibility1","Accessibility2",
                  "Accessibility3","Accessibility4","Accessibility5"),
  fun = "sum",
  type = "new"
)
head(parcel_sum)

## -------------------------------------------------
## Weighted mean: single parcel
## -------------------------------------------------
item_parceling(
  data = shindata_example,
  효능감 = c("efficacy2","efficacy3","efficacy4"),
  fun = "wmean",
  weights = c(0.40, 0.35, 0.25),
  type = "new"
)

## -------------------------------------------------
## Weighted mean: parcel-specific weights (recommended)
## -------------------------------------------------
parcel_wmean <- item_parceling(
  data = shindata_example,
  효능감 = c("efficacy2","efficacy3","efficacy4"),
  연구접근성 = c("Accessibility1","Accessibility2",
                  "Accessibility3","Accessibility4","Accessibility5"),
  fun = "wmean",
  weights = list(
    효능감 = c(0.40, 0.35, 0.25)
  ),
  type = "new"
)
head(parcel_wmean)

\dontrun{
## -------------------------------------------------
## Error example: invalid weights usage
## -------------------------------------------------
item_parceling(
  data = shindata_example,
  효능감 = c("efficacy2","efficacy3","efficacy4"),
  연구접근성 = c("Accessibility1","Accessibility2",
                  "Accessibility3","Accessibility4","Accessibility5"),
  fun = "wmean",
  weights = c(0.40, 0.35, 0.25)
)
}

## -------------------------------------------------
## Factor score (EFA)
## -------------------------------------------------
parcel_fs_efa <- item_parceling(
  data = shindata_example,
  효능감 = c("efficacy2","efficacy3","efficacy4"),
  연구접근성 = c("Accessibility1","Accessibility2",
                  "Accessibility3","Accessibility4","Accessibility5"),
  fun = "factor_efa",
  factor_score = "regression",
  type = "all"
)
parcel_fs_efa$score_info$효능감

## -------------------------------------------------
## EFA alias (warning example)
## -------------------------------------------------
item_parceling(
  data = shindata_example,
  효능감 = c("efficacy2","efficacy3","efficacy4"),
  fun = "efa",
  type = "new"
)

## -------------------------------------------------
## CFA factor score
## -------------------------------------------------
parcel_fs_cfa <- item_parceling(
  data = shindata_example,
  효능감 = c("efficacy2","efficacy3","efficacy4"),
  fun = "factor_cfa",
  type = "all"
)
parcel_fs_cfa$score_info$효능감$CR

## -------------------------------------------------
## name_in_vector usage
## -------------------------------------------------
item_parceling(
  data = shindata_example,
  c("효능감","efficacy2","efficacy3","efficacy4"),
  c("진로흥미","Interest1","Interest2","Interest3","Interest4"),
  fun = "factor_efa",
  name_in_vector = TRUE,
  type = "new"
)

item_parceling(
  data = shindata_example,
  c("efficacy2","efficacy3","efficacy4"),
  진로흥미 = c("Interest1","Interest2","Interest3","Interest4"),
  fun = "factor_efa",
  name_in_vector = "auto",
  type = "new"
)
}
